<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors game</title>
    </head>
    <body>
        <script>

            /* Random distribution check
            function checkRandomDistro() {
                let counter = 0;
                let one = 0;
                let two = 0;
                let three = 0;

                while (counter < 100000) {
                    switch (Math.floor(Math.random() * 3) + 1) {
                        case 1:
                            one ++;
                            break;

                        case 2:
                            two ++;
                            break;

                        case 3:
                            three ++;
                            break;
                    }

                    counter ++;
                }

                console.log(one + " // " + two + " // " + three + " --- " + (one + two + three));
            }
            */

            function getRandomNumber() {
                return Math.floor(Math.random() * 3) + 1;
            }

            function capitalize(str) {
                return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
            }

            function computerPlay() {
                let choice;

                switch (getRandomNumber()) {
                    case 1:
                        choice = 'Rock';
                        break;

                    case 2:
                        choice = 'Paper';
                        break;

                    case 3:
                        choice = 'Scissors'
                        break;
                }

                return choice;
            }           

            function getPlayerChoice() {
                let choice;

                while (choice !== 'Rock' && choice !== 'Paper' && choice !== 'Scissors') {
                    choice = capitalize(prompt('Enter your choice', 'Rock, Paper or Scissors'));
                }
                
                return choice;
            }

            function playRound(playerChoice, computChoice) {
                let pc = playerChoice;
                let cc = computChoice;

                if ((pc === 'Rock' && cc === 'Scissors') || (pc === 'Paper' && cc === 'Rock') || (pc === 'Scissors' && cc === 'Paper')) {
                    return 'Player';
                }

                if (pc === cc) {
                    return 'Tie';
                }

                return 'Computer';
            }

            function getWinner(playerScore, computScore) {
                if (playerScore > computScore) {
                    return ('You win ' + playerScore + ' to ' + computScore + '!');
                }
                if (computScore > playerScore) {
                    return ('You lose ' + computScore + ' to ' + playerScore + '.');
                }
                return ('It\'s a tie. ' + playerScore + '-' + computScore);
            }

            function game() {
                let rounds = 0;
                let playerScore = 0;
                let computScore = 0;

                while (rounds < 5) {
                    const playerChoice = getPlayerChoice();
                    const computChoice = computerPlay();
                    const result = playRound(playerChoice, computChoice)
                    
                    switch (result) {
                    
                    case 'Player':
                        playerScore ++;
                        console.log('You win that round! ' + playerChoice + ' beats ' + computChoice + '!');
                        break;
                    
                    case 'Computer':
                        computScore ++;
                        console.log('You lose that round! ' + computChoice + ' beats ' + playerChoice + '!');
                        break;

                    case 'Tie':
                        console.log('You both lose! Or win... Anyway, it\'s a tie!');
                        break;
                    }

                    rounds ++;
                }
                
                console.log(getWinner(playerScore, computScore));
            }
            
        </script>
    </body>
</html>