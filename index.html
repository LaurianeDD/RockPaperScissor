<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors game</title>
    </head>
    <body>
        <script>
            
            function getRandomNumber(rangeLength) {
                return Math.floor(Math.random() * rangeLength);
            }

            function capitalize(str) {
                return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
            }

            function getComputerChoice(options) {
                return options[getRandomNumber(options.length)];
            }           

            function getPlayerChoice(options) {
                let choice;

                while (!options.includes(choice)) {
                    choice = capitalize(prompt('Enter your choice:', options));
                }
                
                return choice;
            }

            function getRoundWinner(playerChoice, computerChoice) {
                const WAYSTOWIN = [['Rock', 'Scissors'], ['Paper', 'Rock'], ['Scissors', 'Paper']];

                for (let way of WAYSTOWIN) {
                    if (way[0] === playerChoice && way[1] === computerChoice) {                        
                        return 'Player';
                    }
                }

                if (playerChoice === computerChoice) {                   
                    return 'Tie';
                }
                
                return 'Computer';
            }

            function displayRoundWinner(roundWinner, playerChoice, computerChoice) {                
                switch (roundWinner) {
                    case 'Player':             
                        return 'You win that round! ' + playerChoice + ' beats ' + computerChoice + '!';
                        
                    case 'Computer':
                        return 'You lose that round! ' + computerChoice + ' beats ' + playerChoice + '!';
                        
                    case 'Tie':
                        return "You both lose! Or win... Anyway, it's a tie!";                                               
                }
            }

            function playRound() {                
                const OPTIONS = ['Rock', 'Paper', 'Scissors'];

                let playerChoice = getPlayerChoice(OPTIONS);
                let computerChoice = getComputerChoice(OPTIONS);
                let roundWinner = getRoundWinner(playerChoice, computerChoice);

                console.log(displayRoundWinner(roundWinner, playerChoice, computerChoice));

                return roundWinner;            
            }

            function getGameWinner(playerScore, computScore) {
                if (playerScore > computScore) {
                    return 'Player';
                }
                if (computScore > playerScore) {
                    return 'Computer';
                }
                return 'Tie';
            }

            function displayGameScore(gameWinner, playerScore, computScore) {
                switch (gameWinner) {
                    case 'Player':
                        return 'You win ' + playerScore + ' to ' + computScore + '!';
                        
                    case 'Computer':        
                        return 'You lose ' + computScore + ' to ' + playerScore + '.';
                                        
                    case 'Tie':
                        return "It's a tie. " + playerScore + "-" + computScore;
                }
            }

            function game() {
                let playerScore = 0;
                let computScore = 0;
                
                for (rounds = 0; rounds < 5; rounds++) {
                    let roundWinner = playRound()
                    
                    switch (roundWinner) {
                    
                        case 'Player':
                            playerScore ++;
                            break;
                    
                        case 'Computer':
                            computScore ++;
                            break;

                        case 'Tie':
                            break;
                    }
                }
                
                let gameWinner = getGameWinner(playerScore, computScore);

                console.log(displayGameScore(gameWinner, playerScore, computScore));
            }
            
        </script>
    </body>
</html>