<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors game</title>
    </head>
    <body>
        <script>

            /* Random distribution check
            function checkRandomDistro() {
                let counter = 0;
                let one = 0;
                let two = 0;
                let three = 0;

                while (counter < 100000) {
                    switch (Math.floor(Math.random() * 3) + 1) {
                        case 1:
                            one ++;
                            break;

                        case 2:
                            two ++;
                            break;

                        case 3:
                            three ++;
                            break;
                    }

                    counter ++;
                }

                console.log(one + " // " + two + " // " + three + " --- " + (one + two + three));
            }
            */

            function getRandomNumber(rangeLength) {
                return Math.floor(Math.random() * rangeLength);
            }

            function capitalize(str) {
                return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
            }

            function computerPlay(OPTIONS) {
                return OPTIONS[getRandomNumber(OPTIONS.length)];
            }           

            function getPlayerChoice(OPTIONS) {
                let choice;

                while (!OPTIONS.includes(choice)) {
                    choice = capitalize(prompt('Enter your choice:', 'Rock, Paper or Scissors'));
                }
                
                return choice;
            }

            function playRound(playerChoice, computChoice) {
                const WAYSTOWIN = [['Rock', 'Scissors'], ['Paper', 'Rock'], ['Scissors', 'Paper']];

                for (let way of WAYSTOWIN) {
                    if (way[0] === playerChoice && way[1] === computChoice) {
                        console.log('You win that round! ' + playerChoice + ' beats ' + computChoice + '!');
                        return 'Player';
                    }
                }

                if (playerChoice === computChoice) {
                    console.log('You both lose! Or win... Anyway, it\'s a tie!');
                    return 'Tie';
                }

                console.log('You lose that round! ' + computChoice + ' beats ' + playerChoice + '!');
                return 'Computer';
            }

            function getWinner(playerScore, computScore) {
                if (playerScore > computScore) {
                    return ('You win ' + playerScore + ' to ' + computScore + '!');
                }
                if (computScore > playerScore) {
                    return ('You lose ' + computScore + ' to ' + playerScore + '.');
                }
                return ('It\'s a tie. ' + playerScore + '-' + computScore);
            }

            function game() {
                let rounds = 0;
                let playerScore = 0;
                let computScore = 0;
                const OPTIONS = ['Rock', 'Paper', 'Scissors'];

                while (rounds < 5) {
                    let playerChoice = getPlayerChoice(OPTIONS);
                    let computChoice = computerPlay(OPTIONS);
                    let roundWinner = playRound(playerChoice, computChoice)
                    
                    switch (roundWinner) {
                    
                        case 'Player':
                            playerScore ++;
                            break;
                    
                        case 'Computer':
                            computScore ++;
                            break;

                        case 'Tie':
                            break;
                    }

                    rounds ++;
                }
                
                console.log(getWinner(playerScore, computScore));
            }
            
        </script>
    </body>
</html>