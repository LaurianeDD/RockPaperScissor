<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors game</title>
    </head>
    <body>
        <script>
            
            function getRandomNumber(rangeLength) {
                return Math.floor(Math.random() * rangeLength);
            }

            function capitalize(str) {
                return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
            }

            function computerPlay(OPTIONS) {
                return OPTIONS[getRandomNumber(OPTIONS.length)];
            }           

            function getPlayerChoice(OPTIONS) {
                let choice;

                while (!OPTIONS.includes(choice)) {
                    choice = capitalize(prompt('Enter your choice:', OPTIONS));
                }
                
                return choice;
            }

            function getRoundWinner(playerChoice, computChoice) {
                const WAYSTOWIN = [['Rock', 'Scissors'], ['Paper', 'Rock'], ['Scissors', 'Paper']];

                for (let way of WAYSTOWIN) {
                    if (way[0] === playerChoice && way[1] === computChoice) {
                        console.log('You win that round! ' + playerChoice + ' beats ' + computChoice + '!');
                        return 'Player';
                    }
                }

                if (playerChoice === computChoice) {
                    console.log('You both lose! Or win... Anyway, it\'s a tie!');
                    return 'Tie';
                }

                console.log('You lose that round! ' + computChoice + ' beats ' + playerChoice + '!');
                return 'Computer';
            }

            function playRound() {                
                const OPTIONS = ['Rock', 'Paper', 'Scissors'];

                let playerChoice = getPlayerChoice(OPTIONS);
                let computChoice = computerPlay(OPTIONS);

                return getRoundWinner(playerChoice, computChoice);                
            }

            function getGameWinner(playerScore, computScore) {
                if (playerScore > computScore) {
                    return ('You win ' + playerScore + ' to ' + computScore + '!');
                }
                if (computScore > playerScore) {
                    return ('You lose ' + computScore + ' to ' + playerScore + '.');
                }
                return ('It\'s a tie. ' + playerScore + '-' + computScore);
            }

            function game() {
                let rounds = 0;
                let playerScore = 0;
                let computScore = 0;
                
                while (rounds < 5) {
                    let roundWinner = playRound()
                    
                    switch (roundWinner) {
                    
                        case 'Player':
                            playerScore ++;
                            break;
                    
                        case 'Computer':
                            computScore ++;
                            break;

                        case 'Tie':
                            break;
                    }

                    rounds ++;
                }
                
                console.log(getGameWinner(playerScore, computScore));
            }
            
        </script>
    </body>
</html>